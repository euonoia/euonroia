# ---- Frontend Dockerfile (Dev) ----
FROM node:22-alpine

# Set working directory
WORKDIR /app

# Install Yarn globally if not already installed
RUN if ! command -v yarn > /dev/null; then npm install -g yarn; fi

# Copy package dependency files first for caching
COPY package*.json ./

# Install dependencies using Yarn
RUN yarn install --frozen-lockfile

# Copy all frontend source code into the image
COPY . .

# Expose Vite dev server port
EXPOSE 5173

# Use Yarn to start dev server and listen on all interfaces
CMD ["yarn", "run", "dev", "--", "--host", "0.0.0.0"]
